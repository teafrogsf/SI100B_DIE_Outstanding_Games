队名：O.o

队员：
王歆玥 2023591002
杨泰格 2023591008
朱震阳 2023591007


### GameType:Rougelike
玩家扮演冒险者击杀威胁城市的怪物，并最终挑战幕后黑手，
或着沉迷于21点任由城市自生自灭。

# 地图设计：
    地图总共有三个场景：
    1、城市，玩家可以在此处与NPC进行21点小游戏，在商店中用金钱进行交易；
    2、野外，玩家可以在此处与怪物战斗获取金钱；
    3、Boss房，玩家进入Boss房后只能与Boss决一死战。

# 游戏设定：
    玩家初始出生在城市，拥有30金币武装自己，随后可通过传送门进入野外与怪物搏斗。
    游戏中有三种怪物：脆皮神射手骷髅头、血牛刮痧飞天猴、高攻高防精英绿皮人。
    每种怪物的属性都不一样， 玩家击败怪物后可以获得金钱，
    击败强力的绿皮人可以获得相对更多的金币。
    在野外，玩家不仅要与怪物战斗，还要在错综复杂的树林中寻找道路，避免走上火堆被火灼烧。
    受到幕后黑手大扑棱蛾子的影响，玩家每次进入野外时怪物都会变得更强，小心了！
    相应地，玩家击败怪物所能获得的金币也越多。
    返回城市可以用金币购买升级：
    商店界面采用鼠标操作，选择自己想购买的升级并点击即可将其收入囊中。
    商店中还存在着需要献祭自己的生命才能购买的神秘商品，其实际作用为削弱怪物的等级，
    但你仍然可以从怪物身上获取相当于未购买神秘物品时怪物等级所对应的金币！
    你需要时刻管理好自己的金币与血量！
    如果你每次不多击杀一点怪物赚取报酬，你很快就会败给不断升级的怪物！
    但如果你太贪心，你也会不小心被小怪杀死！
    你需要击败幕后黑手大扑棱蛾子就能拯救城市，成为英雄！游戏通关。
    当然，如果你不想被卷入与怪物的血腥厮杀中，你也可以和城市里的对话NPC玩上一整天的21点。

# 移动和障碍物：
    玩家通过wasd四个按键进行移动，无法跨越树木类、墙壁类障碍物。
    玩家可以跨越火堆类障碍物，玩家在火堆上移动时会受到伤害。

# 实体设定：
    NPC，商店，怪物，传送门，火堆与Boss均为实体，玩家与他们碰撞后会触发相应事件：
    玩家与NPC碰撞会触发对话事件，再按ENTER键可以进入21点小游戏；
    玩家与商店碰撞会触发购物事件；
    玩家与怪物、Boss碰撞会触发战斗事件；
    玩家与传送门碰撞会触发传送事件；
    玩家与火堆碰撞会触发着火事件。

# 游戏形式
    肉鸽类游戏，怪物会逐渐变强，死亡后游戏重新开始。
    玩家所面临的最大挑战在于管理自己的血量与金币！
    战斗采用回合制，玩家与怪物轮流攻击，直到一方死亡。
    以玩家通关总时长作为成绩衡量，与你的小伙伴比比谁能更快通关吧！

# 游戏文件
    仓库中Game Project为游戏文件。
    用编辑器打开Game Project后运行Main.py，
    或直接通过在游戏目录打开终端并输入python Main.py运行，
    即可进入游戏。
    
    1、Attribute.py
      该文件定义了Collidable类，便于进行实体碰撞后相应事件的触发。

    2、BgmPlayer.py
      该文件负责处理背景音乐的播放。

    3、Gamemanager.py
      该文件定义了GameManager类，该类负责管理游戏。
      玩家、场景、菜单、NPC、弹出框均由该类在每一帧进行更新与渲染。
      该类还负责处理事件队列、切换场景、检测碰撞、计时等功能。

    4、Main.py
      该文件是游戏主程序，包含了游戏主循环，负责运行游戏。

    5、NPCs.py
      该文件定义了NPC类，Monster类与Boss类。
      NPC类有两个子类，DialogNPC与ShopNPC，分别负责初始化与更新对话NPC与商店。
      Monster类与Boss类分别负责初始化与更新三种怪物与Boss。
      Monster类还会根据当前等级与玩家购买商品来强化/削弱怪物。

    6、Player.py
      该文件定义了Player类，该类负责处理玩家移动、更新玩家参数、播放人物动画等。
      其中，玩家的横向移动与纵向移动被定义为了两个方法，以处理玩家在障碍物边缘时的移动卡顿问题。

    7、PopUpBox.py
      该文件定义了DialogBox类、BattleBox类与ShoppingBox类，
      分别负责绘制对话框、战斗框与购物框。
      其中，BattleBox类还负责处理战斗过程，计算战斗结果等；
      ShoppingBox类还负责监测鼠标移动点击，处理购买结果等。

    8、Portal.py
      该文件定义了Portal类，该类负责初始化与绘制传送门。

    9、Scene.py
      该文件定义了Scene类、StartMenu类与EndMenu类，
      StartMenu类负责初始化与渲染开始菜单。
      Scene类有CityScene、WildScene与BossScene三个子类，
      它们分别负责初始化与渲染城市场景、野外场景与boss房，并在其中生成障碍物、NPC与怪物。
      EndMenu类有VictoryMenu与DefeatMenu两个子类，
      它们分别负责初始化与绘制胜利界面与失败界面。

    10、Settings.py
      该文件负责存储游戏内的各种参数设置，如窗口大小、场景大小、玩家属性等。

    11、Tile.py
      该文件定义了Tile类、Tree类、Mouse类与Item类。
      Tile类负责初始化并绘制组成场景的地图砖块，每个场景均由Tile拼接而成。
      Tree类负责初始化、绘制并更新地图上的有动画的物品。
      城市场景中的动画树与火堆均属于该类的实例。
      Mouse类负责初始化并更新商店中的鼠标。
      Item类有多个子类，分别负责商店中的各项物品的初始化。

    12、Blackjack.py
      该文件定义了BlackJack类，该类负责初始化并运行21点小游戏。其中的run_game方法负责运行小游戏。